/*!
(C) Andrea Giammarchi, @WebReflection - Mit Style License
*/
var setTimeout=global.setTimeout,setInterval=global.setInterval,clearInterval=global.clearInterval,clearTimeout=global.clearTimeout;setTimeout||(function(h,c,g,a){setInterval=global.setInterval=function b(j,i){return e(j,i,g.call(arguments,2),1)};setTimeout=global.setTimeout=function d(j,i){return e(j,i,g.call(arguments,2))};clearInterval=global.clearInterval=clearTimeout=global.clearTimeout=function f(i){c[i].cancel();h.purge();delete c[i]};function e(l,k,j,i){var m=++a;c[m]=new JavaAdapter(java.util.TimerTask,{run:function(){l.apply(null,j)}});i?h.schedule(c[m],k,k):h.schedule(c[m],k);return m}})(new java.util.Timer(),{},[].slice,0);var wru=function(S){function g(){v=E.call(i);if(v){k(X);k((ab(v,M)&&v[M])||(ab(v,e)&&v[e])||K);a=[];p=[];N=[];V={};b("setup");N[ac]||b("test");b("teardown");H||m()}else{o()}}function k(af,ae){af=af+(ae?"":"\n");try{require("util").print(af)}catch(ad){try{require("sys").print(af)}catch(ad){java.lang.System.out.print(af)}}}function o(){k(f);k(X);switch(true){case !!Y:k(L+"   "+Y+" Errors");case !!y:k(I+f+y+" Failures");default:k(x+"      "+n+" Passes")}k(X);k(f);try{process.exit()}catch(ad){quit()}}function c(ad){for(var ae=0,af=ad[ac];ae<af;k("    "+(++ae)+". "+ad[ae-1])){}}function m(){n+=a[ac];y+=p[ac];Y+=N[ac];if(N[ac]){Q=L;c(N)}else{if(p[ac]){Q=I;c(p)}else{Q=x}}k(Q+" passes: "+a[ac]+", fails: "+p[ac]+", errors: "+N[ac]);G=0;Q=f;g()}function b(ad){if(ab(v,ad)){try{v[ad](V)}catch(ae){U.call(N,f+ae)}}}function ab(ae,ad){return l.call(ae,ad)}function r(){return A()<0.5?-1:1}var T={assert:function O(ae,ad){if(arguments[ac]==1){ad=ae;ae=K}u=C;U.call(ad?a:p,Q+ae);return ad},async:function P(ae,ah,af,ag){ag=++H;if(typeof ae=="function"){af=ah;ah=ae;ae="asynchronous test #"+ag}af=R(function(){ag=0;U.call(p,ae);--H||m()},F(af||t)||t);return function ad(){if(!ag){return}u=Z;Q=ae+": ";try{ah.apply(this,arguments)}catch(ai){u=C;U.call(N,Q+ai)}Q=f;if(u){B(af);--H||m()}}},test:function j(ad){i=D.apply(i,[ad]);T.random&&aa.call(i,r);H||g()}},C=true,Z=!C,t=100,f=" ",K="unknown",ac="length",M="name",e="description",z="<li>",d="</li>",h="\\|/-",l=T.hasOwnProperty,Q=f,W=Q.charAt,s=Q.slice,i=[],D=i.concat,q=i.join,U=i.push,E=i.shift,aa=i.sort,H=0,G=0,n=0,y=0,Y=0,L="\033[1;31mERROR\033[0m",I="\033[0;31mFAILURE\033[0m",x="\033[0;32mOK\033[0m",X="------------------------------",w,F,A,R,B,v,J,a,p,N,V,u;if(typeof global!="function"){S.wru=T;S=global}w=S.Math;F=w.abs;A=w.random;R=S.setTimeout;B=S.clearTimeout;S.setInterval(function(){H&&k(f+W.call(h,G++%4)+"\b\b",true)},t);t*=t;T.random=Z;return T}(this);